{% extends "base.html" %}

{% block title %}Admin - Einstellungen{% endblock %}

{% block content %}
<div class="admin-page">
    <!-- Header -->
    <header class="header">
        <h1>âš™ï¸ Einstellungen</h1>
    </header>
    
    <!-- System Status -->
    <section class="admin-section">
        <h2>ğŸ“Š System Status</h2>
        <div class="status-grid">
            <div class="status-card">
                <div class="status-icon">ğŸ“·</div>
                <div class="status-info">
                    <h3>Kamera</h3>
                    <p class="status-value {% if camera_connected %}status-ok{% else %}status-error{% endif %}">
                        {% if camera_connected %}âœ“ Verbunden{% else %}âœ— Nicht verbunden{% endif %}
                    </p>
                </div>
                <button class="btn btn-small" onclick="testCamera()">Test</button>
            </div>
            
            <div class="status-card">
                <div class="status-icon">ğŸ–¼ï¸</div>
                <div class="status-info">
                    <h3>Fotos</h3>
                    <p class="status-value">{{ photo_count }} gespeichert</p>
                </div>
                <button class="btn btn-small" onclick="openGallery()">Anzeigen</button>
            </div>
            
            <div class="status-card">
                <div class="status-icon">ğŸ’¾</div>
                <div class="status-info">
                    <h3>Speicher</h3>
                    <p class="status-value" id="storage-info">Wird geladen...</p>
                </div>
                <button class="btn btn-small" onclick="checkStorage()">PrÃ¼fen</button>
            </div>
        </div>
    </section>
    
    <!-- Kamera Einstellungen -->
    <section class="admin-section">
        <h2>ğŸ“· Kamera Einstellungen</h2>
        <div class="settings-form">
            <div class="form-group">
                <label>Kamera Status:</label>
                <div class="status-display" id="camera-status">
                    {% if camera_connected %}
                        <span class="status-ok">âœ“ Canon EOS 2000D erkannt</span>
                    {% else %}
                        <span class="status-error">âœ— Keine Kamera gefunden</span>
                    {% endif %}
                </div>
                <button class="btn btn-secondary" onclick="refreshCameraStatus()">
                    ğŸ”„ Status aktualisieren
                </button>
            </div>
        </div>
    </section>
    
    <!-- Phase 2 Features -->
    <section class="admin-section">
        <h2>ğŸš€ Erweiterte Features (Phase 2)</h2>
        
        <!-- Overlay-Einstellungen -->
        <div class="feature-section">
            <h3>ğŸ¨ Overlay & Branding</h3>
            <div class="feature-controls">
                <div class="toggle-group">
                    <label class="toggle-switch">
                        <input type="checkbox" id="overlay-enabled" onchange="toggleOverlay()">
                        <span class="slider"></span>
                    </label>
                    <span>Overlays aktivieren</span>
                </div>
                
                <div class="overlay-options" id="overlay-options" style="display: none;">
                    <div class="form-group">
                        <label>Text-Overlay:</label>
                        <input type="text" id="overlay-text" placeholder="z.B. Photobox {date}" 
                               onchange="updateOverlayText()">
                        <small>Verwende {date}, {time}, {datetime} fÃ¼r automatische Werte</small>
                    </div>
                    
                    <div class="form-group">
                        <button class="btn btn-secondary" onclick="uploadLogo()">Logo hochladen</button>
                        <button class="btn btn-secondary" onclick="testOverlay()">Overlay testen</button>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- Druck-Einstellungen -->
        <div class="feature-section">
            <h3>ğŸ–¨ï¸ Automatisches Drucken</h3>
            <div class="feature-controls">
                <div class="toggle-group">
                    <label class="toggle-switch">
                        <input type="checkbox" id="print-enabled" onchange="togglePrint()">
                        <span class="slider"></span>
                    </label>
                    <span>Drucken aktivieren</span>
                </div>
                
                <div class="print-options" id="print-options" style="display: none;">
                    <div class="form-group">
                        <label>Drucker:</label>
                        <select id="printer-select" onchange="updatePrinter()">
                            <option value="">Drucker wÃ¤hlen...</option>
                        </select>
                        <button class="btn btn-small" onclick="refreshPrinters()">ğŸ”„</button>
                    </div>
                    
                    <div class="form-group">
                        <label class="toggle-switch">
                            <input type="checkbox" id="auto-print" onchange="toggleAutoPrint()">
                            <span class="slider"></span>
                        </label>
                        <span>Automatisch drucken nach Foto</span>
                    </div>
                    
                    <div class="form-group">
                        <button class="btn btn-secondary" onclick="testPrinter()">Drucker testen</button>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- Upload-Einstellungen -->
        <div class="feature-section">
            <h3>â˜ï¸ Server Upload</h3>
            <div class="feature-controls">
                <div class="toggle-group">
                    <label class="toggle-switch">
                        <input type="checkbox" id="upload-enabled" onchange="toggleUpload()">
                        <span class="slider"></span>
                    </label>
                    <span>Upload aktivieren</span>
                </div>
                
                <div class="upload-options" id="upload-options" style="display: none;">
                    <div class="form-group">
                        <label>Upload-Methode:</label>
                        <select id="upload-method" onchange="updateUploadMethod()">
                            <option value="http">HTTP POST</option>
                            <option value="sftp">SFTP</option>
                        </select>
                    </div>
                    
                    <div class="form-group" id="http-config">
                        <label>HTTP Endpoint:</label>
                        <input type="url" id="http-endpoint" placeholder="https://server.com/upload" 
                               onchange="updateHttpEndpoint()">
                    </div>
                    
                    <div class="form-group">
                        <label class="toggle-switch">
                            <input type="checkbox" id="auto-upload" onchange="toggleAutoUpload()">
                            <span class="slider"></span>
                        </label>
                        <span>Automatisch hochladen nach Foto</span>
                    </div>
                    
                    <div class="form-group">
                        <button class="btn btn-secondary" onclick="testUpload()">Verbindung testen</button>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- Phase 3: Kiosk & Deployment -->
        <div class="feature-section">
            <h3>ğŸ–¥ï¸ Kiosk & Deployment</h3>
            <div class="feature-controls">
                <div class="feature-card">
                    <h4>Kiosk-Modus</h4>
                    <div class="form-group">
                        <label class="toggle-switch">
                            <input type="checkbox" id="kiosk-enabled" onchange="toggleKioskMode()">
                            <span class="slider"></span>
                        </label>
                        <span>Kiosk-Modus aktivieren</span>
                        <small>Startet die App automatisch im Vollbild nach Neustart</small>
                    </div>
                    
                    <div class="form-group">
                        <label class="toggle-switch">
                            <input type="checkbox" id="autostart-enabled" onchange="toggleAutostart()">
                            <span class="slider"></span>
                        </label>
                        <span>Autostart aktivieren</span>
                        <small>Startet den Photobox-Service automatisch beim Booten</small>
                    </div>
                    
                    <div class="form-group">
                        <label>Bildschirm-Timeout (Minuten):</label>
                        <input type="number" id="screen-timeout" min="0" max="60" value="10" 
                               onchange="updateScreenTimeout()">
                        <small>0 = Bildschirm nie ausschalten</small>
                    </div>
                </div>
                
                <div class="feature-card">
                    <h4>Deployment & Backup</h4>
                    <div class="form-group">
                        <label class="toggle-switch">
                            <input type="checkbox" id="backup-enabled" onchange="toggleBackup()">
                            <span class="slider"></span>
                        </label>
                        <span>Automatisches Backup</span>
                        <small>Erstellt tÃ¤glich um 2:00 Uhr ein Backup</small>
                    </div>
                    
                    <div class="form-group">
                        <button class="btn btn-secondary" onclick="createBackup()">
                            ğŸ’¾ Backup jetzt erstellen
                        </button>
                        <button class="btn btn-secondary" onclick="exportConfig()">
                            ğŸ“„ Konfiguration exportieren
                        </button>
                    </div>
                    
                    <div class="form-group">
                        <label>Konfiguration importieren:</label>
                        <input type="file" id="config-import" accept=".json" onchange="importConfig(this)">
                    </div>
                </div>
                
                <div class="feature-card">
                    <h4>System-Steuerung</h4>
                    <div class="form-group">
                        <button class="btn btn-primary" onclick="restartSystem()">
                            ğŸ”„ System neustarten
                        </button>
                        <button class="btn btn-secondary" onclick="shutdownSystem()">
                            â» System herunterfahren
                        </button>
                    </div>
                    
                    <div class="form-group">
                        <button class="btn btn-warning" onclick="resetToDefaults()">
                            ğŸ”„ Auf Standardwerte zurÃ¼cksetzen
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </section>
    
    <!-- System Aktionen -->
    <section class="admin-section">
        <h2>ğŸ”§ System Aktionen</h2>
        <div class="action-buttons">
            <button class="btn btn-primary" onclick="restartApp()">
                ğŸ”„ App neu starten
            </button>
            <button class="btn btn-secondary" onclick="checkUpdates()">
                ğŸ“¦ Updates prÃ¼fen
            </button>
            <button class="btn btn-warning" onclick="clearCache()">
                ğŸ§¹ Cache leeren
            </button>
        </div>
    </section>
    
    <!-- Quick Access Features -->
    <section class="admin-section">
        <h2>ğŸš€ Erweiterte Features</h2>
        <div class="feature-grid">
            <a href="{{ url_for('features') }}" class="feature-card">
                <div class="feature-icon">â±ï¸</div>
                <div class="feature-info">
                    <h3>Countdown & Features</h3>
                    <p>Erweiterte Funktionen konfigurieren</p>
                </div>
                <div class="feature-badge">Phase 4</div>
            </a>
        </div>
    </section>

    <!-- Navigation -->
    <nav class="bottom-nav">
        <a href="{{ url_for('index') }}" class="nav-item">
            <span class="nav-icon">ğŸ“·</span>
            <span class="nav-text">Foto</span>
        </a>
        <a href="{{ url_for('gallery') }}" class="nav-item">
            <span class="nav-icon">ğŸ–¼ï¸</span>
            <span class="nav-text">Galerie</span>
        </a>
        <a href="{{ url_for('admin') }}" class="nav-item active">
            <span class="nav-icon">âš™ï¸</span>
            <span class="nav-text">Einstellungen</span>
        </a>
        <a href="{{ url_for('features') }}" class="nav-item">
            <span class="nav-icon">ğŸš€</span>
            <span class="nav-text">Features</span>
        </a>
    </nav>
</div>
{% endblock %}

{% block scripts %}
<script>
// Kamera testen
function testCamera() {
    showLoading();
    
    fetch('/api/test_camera')
        .then(response => response.json())
        .then(data => {
            hideLoading();
            if (data.success) {
                showNotification('âœ“ Kamera Test erfolgreich', 'success');
                console.log('Kamera Info:', data.summary);
            } else {
                showNotification('âœ— Kamera Test fehlgeschlagen: ' + data.error, 'error');
            }
        })
        .catch(error => {
            hideLoading();
            showNotification('Fehler beim Kamera Test: ' + error.message, 'error');
        });
}

// Kamera Status aktualisieren
function refreshCameraStatus() {
    fetch('/api/camera_status')
        .then(response => response.json())
        .then(data => {
            const statusElement = document.getElementById('camera-status');
            if (data.connected) {
                statusElement.innerHTML = '<span class="status-ok">âœ“ ' + data.message + '</span>';
            } else {
                statusElement.innerHTML = '<span class="status-error">âœ— ' + data.message + '</span>';
            }
        })
        .catch(error => {
            showNotification('Fehler beim Status Update: ' + error.message, 'error');
        });
}

// Galerie Ã¶ffnen
function openGallery() {
    window.location.href = '{{ url_for("gallery") }}';
}

// Speicher prÃ¼fen
function checkStorage() {
    const storageInfo = document.getElementById('storage-info');
    // Placeholder - in echter Implementierung wÃ¼rde hier der Speicher geprÃ¼ft
    storageInfo.textContent = 'Ausreichend verfÃ¼gbar';
    showNotification('ğŸ’¾ Speicher Status aktualisiert', 'info');
}

// System Aktionen (Platzhalter)
function restartApp() {
    if (confirm('App wirklich neu starten?')) {
        showNotification('ğŸ”„ Neustart wird implementiert...', 'info');
    }
}

function checkUpdates() {
    showNotification('ğŸ“¦ Update-Funktion wird in Phase 3 implementiert', 'info');
}

function clearCache() {
    showNotification('ğŸ§¹ Cache-Funktion wird implementiert...', 'info');
}

// Phase 2 JavaScript-Funktionen

// Overlay-Funktionen
function toggleOverlay() {
    const enabled = document.getElementById('overlay-enabled').checked;
    document.getElementById('overlay-options').style.display = enabled ? 'block' : 'none';
    updateConfig('overlay.enabled', enabled);
}

function updateOverlayText() {
    const text = document.getElementById('overlay-text').value;
    updateConfig('overlay.text_content', text);
    updateConfig('overlay.text_enabled', text.length > 0);
}

function uploadLogo() {
    showNotification('ğŸ“ Logo-Upload wird in Phase 3 implementiert', 'info');
}

function testOverlay() {
    showNotification('ğŸ¨ Overlay-Test wird implementiert', 'info');
}

// Druck-Funktionen
function togglePrint() {
    const enabled = document.getElementById('print-enabled').checked;
    document.getElementById('print-options').style.display = enabled ? 'block' : 'none';
    updateConfig('printing.enabled', enabled);
    
    if (enabled) {
        refreshPrinters();
    }
}

function toggleAutoPrint() {
    const enabled = document.getElementById('auto-print').checked;
    updateConfig('printing.auto_print', enabled);
}

function updatePrinter() {
    const printerName = document.getElementById('printer-select').value;
    updateConfig('printing.printer_name', printerName);
}

function refreshPrinters() {
    fetch('/api/printers')
        .then(response => response.json())
        .then(data => {
            const select = document.getElementById('printer-select');
            select.innerHTML = '<option value="">Drucker wÃ¤hlen...</option>';
            
            if (data.success && data.printers) {
                data.printers.forEach(printer => {
                    const option = document.createElement('option');
                    option.value = printer.name;
                    option.textContent = `${printer.name} (${printer.status})`;
                    select.appendChild(option);
                });
            }
        })
        .catch(error => {
            showNotification('Fehler beim Laden der Drucker: ' + error.message, 'error');
        });
}

function testPrinter() {
    showLoading();
    
    fetch('/api/test_printer', { method: 'POST' })
        .then(response => response.json())
        .then(data => {
            hideLoading();
            if (data.success) {
                showNotification('âœ“ Drucker-Test erfolgreich', 'success');
            } else {
                showNotification('âœ— Drucker-Test fehlgeschlagen: ' + data.message, 'error');
            }
        })
        .catch(error => {
            hideLoading();
            showNotification('Fehler beim Drucker-Test: ' + error.message, 'error');
        });
}

// Upload-Funktionen
function toggleUpload() {
    const enabled = document.getElementById('upload-enabled').checked;
    document.getElementById('upload-options').style.display = enabled ? 'block' : 'none';
    updateConfig('upload.enabled', enabled);
}

function toggleAutoUpload() {
    const enabled = document.getElementById('auto-upload').checked;
    updateConfig('upload.auto_upload', enabled);
}

function updateUploadMethod() {
    const method = document.getElementById('upload-method').value;
    updateConfig('upload.upload_method', method);
    
    // Zeige/verstecke entsprechende Konfiguration
    document.getElementById('http-config').style.display = 
        method === 'http' ? 'block' : 'none';
}

function updateHttpEndpoint() {
    const endpoint = document.getElementById('http-endpoint').value;
    updateConfig('upload.http_endpoint', endpoint);
}

function testUpload() {
    showLoading();
    
    fetch('/api/test_upload', { method: 'POST' })
        .then(response => response.json())
        .then(data => {
            hideLoading();
            if (data.success) {
                showNotification('âœ“ Upload-Test erfolgreich', 'success');
            } else {
                showNotification('âœ— Upload-Test fehlgeschlagen: ' + data.message, 'error');
            }
        })
        .catch(error => {
            hideLoading();
            showNotification('Fehler beim Upload-Test: ' + error.message, 'error');
        });
}

// Konfiguration aktualisieren
function updateConfig(key, value) {
    const data = {};
    data[key] = value;
    
    fetch('/api/config', {
        method: 'POST',
        headers: {
            'Content-Type': 'application/json',
        },
        body: JSON.stringify(data)
    })
    .then(response => response.json())
    .then(data => {
        if (!data.success) {
            showNotification('Konfigurationsfehler: ' + data.message, 'error');
        }
    })
    .catch(error => {
        showNotification('Fehler beim Speichern: ' + error.message, 'error');
    });
}

// Lade aktuelle Konfiguration beim Start
function loadCurrentConfig() {
    fetch('/api/config')
        .then(response => response.json())
        .then(data => {
            if (data.success) {
                const config = data.config;
                
                // Overlay-Einstellungen
                if (document.getElementById('overlay-enabled')) {
                    document.getElementById('overlay-enabled').checked = config.overlay.enabled;
                    document.getElementById('overlay-text').value = config.overlay.text_content || '';
                    document.getElementById('overlay-options').style.display = 
                        config.overlay.enabled ? 'block' : 'none';
                }
                
                // Druck-Einstellungen  
                if (document.getElementById('print-enabled')) {
                    document.getElementById('print-enabled').checked = config.printing.enabled;
                    document.getElementById('auto-print').checked = config.printing.auto_print;
                    document.getElementById('print-options').style.display = 
                        config.printing.enabled ? 'block' : 'none';
                        
                    if (config.printing.enabled) {
                        refreshPrinters();
                    }
                }
                
                // Upload-Einstellungen
                if (document.getElementById('upload-enabled')) {
                    document.getElementById('upload-enabled').checked = config.upload.enabled;
                    document.getElementById('auto-upload').checked = config.upload.auto_upload;
                    document.getElementById('upload-method').value = config.upload.upload_method;
                    document.getElementById('upload-options').style.display = 
                        config.upload.enabled ? 'block' : 'none';
                    
                    updateUploadMethod();
                }
            }
        })
        .catch(error => {
            console.error('Fehler beim Laden der Konfiguration:', error);
        });
}

// Phase 3: Kiosk & Deployment Funktionen
function toggleKioskMode() {
    const enabled = document.getElementById('kiosk-enabled').checked;
    
    fetch('/api/kiosk/toggle', {
        method: 'POST',
        headers: {
            'Content-Type': 'application/json',
        },
        body: JSON.stringify({ enabled: enabled })
    })
    .then(response => response.json())
    .then(data => {
        if (data.success) {
            showNotification(enabled ? 'âœ“ Kiosk-Modus aktiviert' : 'âœ“ Kiosk-Modus deaktiviert', 'success');
        } else {
            showNotification('âœ— Fehler beim Umschalten: ' + data.error, 'error');
        }
    })
    .catch(error => {
        showNotification('Fehler: ' + error.message, 'error');
    });
}

function toggleAutostart() {
    const enabled = document.getElementById('autostart-enabled').checked;
    
    fetch('/api/autostart/toggle', {
        method: 'POST',
        headers: {
            'Content-Type': 'application/json',
        },
        body: JSON.stringify({ enabled: enabled })
    })
    .then(response => response.json())
    .then(data => {
        if (data.success) {
            showNotification(enabled ? 'âœ“ Autostart aktiviert' : 'âœ“ Autostart deaktiviert', 'success');
        } else {
            showNotification('âœ— Fehler beim Umschalten: ' + data.error, 'error');
        }
    })
    .catch(error => {
        showNotification('Fehler: ' + error.message, 'error');
    });
}

function updateScreenTimeout() {
    const timeout = document.getElementById('screen-timeout').value;
    updateConfig('screen_timeout', parseInt(timeout));
    showNotification('âœ“ Bildschirm-Timeout aktualisiert', 'success');
}

function toggleBackup() {
    const enabled = document.getElementById('backup-enabled').checked;
    updateConfig('backup_enabled', enabled);
    showNotification(enabled ? 'âœ“ Automatisches Backup aktiviert' : 'âœ“ Automatisches Backup deaktiviert', 'success');
}

function restartSystem() {
    if (confirm('System wirklich neustarten? Dies beendet alle laufenden Prozesse.')) {
        showLoading();
        
        fetch('/api/system/restart', { method: 'POST' })
        .then(response => response.json())
        .then(data => {
            if (data.success) {
                showNotification('âœ“ System wird neugestartet...', 'success');
                // Nach 3 Sekunden Seite neu laden (falls Neustart fehlschlÃ¤gt)
                setTimeout(() => {
                    window.location.reload();
                }, 3000);
            } else {
                hideLoading();
                showNotification('âœ— Neustart fehlgeschlagen: ' + data.error, 'error');
            }
        })
        .catch(error => {
            hideLoading();
            showNotification('Fehler beim Neustart: ' + error.message, 'error');
        });
    }
}

function shutdownSystem() {
    if (confirm('System wirklich herunterfahren? Die Photobox wird komplett ausgeschaltet.')) {
        showLoading();
        
        fetch('/api/system/shutdown', { method: 'POST' })
        .then(response => response.json())
        .then(data => {
            if (data.success) {
                showNotification('âœ“ System wird heruntergefahren...', 'success');
            } else {
                hideLoading();
                showNotification('âœ— Herunterfahren fehlgeschlagen: ' + data.error, 'error');
            }
        })
        .catch(error => {
            hideLoading();
            showNotification('Fehler beim Herunterfahren: ' + error.message, 'error');
        });
    }
}

function createBackup() {
    showLoading();
    
    fetch('/api/backup/create', { method: 'POST' })
    .then(response => response.json())
    .then(data => {
        hideLoading();
        if (data.success) {
            showNotification('âœ“ ' + data.message, 'success');
        } else {
            showNotification('âœ— Backup fehlgeschlagen: ' + data.error, 'error');
        }
    })
    .catch(error => {
        hideLoading();
        showNotification('Fehler beim Backup: ' + error.message, 'error');
    });
}

function exportConfig() {
    fetch('/api/config/export')
    .then(response => response.json())
    .then(data => {
        if (data.success) {
            // Download der Konfigurationsdatei
            const blob = new Blob([JSON.stringify(data.config, null, 2)], { type: 'application/json' });
            const url = window.URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.style.display = 'none';
            a.href = url;
            a.download = data.filename;
            document.body.appendChild(a);
            a.click();
            window.URL.revokeObjectURL(url);
            document.body.removeChild(a);
            
            showNotification('âœ“ Konfiguration exportiert', 'success');
        } else {
            showNotification('âœ— Export fehlgeschlagen: ' + data.error, 'error');
        }
    })
    .catch(error => {
        showNotification('Fehler beim Export: ' + error.message, 'error');
    });
}

function importConfig(input) {
    const file = input.files[0];
    if (file) {
        const reader = new FileReader();
        reader.onload = function(e) {
            try {
                const config = JSON.parse(e.target.result);
                
                fetch('/api/config/import', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                    },
                    body: JSON.stringify({ config: config })
                })
                .then(response => response.json())
                .then(data => {
                    if (data.success) {
                        showNotification('âœ“ Konfiguration importiert', 'success');
                        setTimeout(() => {
                            window.location.reload();
                        }, 1500);
                    } else {
                        showNotification('âœ— Import fehlgeschlagen: ' + data.error, 'error');
                    }
                })
                .catch(error => {
                    showNotification('Fehler beim Import: ' + error.message, 'error');
                });
                
            } catch (error) {
                showNotification('âœ— UngÃ¼ltige Konfigurationsdatei', 'error');
            }
        };
        reader.readAsText(file);
    }
}

function resetToDefaults() {
    if (confirm('Wirklich alle Einstellungen auf Standardwerte zurÃ¼cksetzen? Diese Aktion kann nicht rÃ¼ckgÃ¤ngig gemacht werden.')) {
        fetch('/api/config/reset', { method: 'POST' })
        .then(response => response.json())
        .then(data => {
            if (data.success) {
                showNotification('âœ“ Konfiguration zurÃ¼ckgesetzt', 'success');
                setTimeout(() => {
                    window.location.reload();
                }, 1500);
            } else {
                showNotification('âœ— Reset fehlgeschlagen: ' + data.error, 'error');
            }
        })
        .catch(error => {
            showNotification('Fehler beim Reset: ' + error.message, 'error');
        });
    }
}

// Speicher Info beim Laden aktualisieren
document.addEventListener('DOMContentLoaded', function() {
    checkStorage();
    loadCurrentConfig();
});
</script>

<style>
/* Phase 4 Feature Grid Styles */
.feature-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
    gap: 1rem;
    margin-top: 1rem;
}

.feature-grid .feature-card {
    display: flex;
    align-items: center;
    gap: 1rem;
    background: white;
    border-radius: 12px;
    padding: 1.5rem;
    text-decoration: none;
    color: inherit;
    border: 2px solid #e0e0e0;
    transition: all 0.3s ease;
    position: relative;
    overflow: hidden;
}

.feature-grid .feature-card:hover {
    transform: translateY(-3px);
    box-shadow: 0 8px 25px rgba(0,0,0,0.15);
    border-color: #007bff;
}

.feature-grid .feature-card::before {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    width: 4px;
    height: 100%;
    background: linear-gradient(135deg, #007bff, #00d4ff);
    opacity: 0;
    transition: opacity 0.3s ease;
}

.feature-grid .feature-card:hover::before {
    opacity: 1;
}

.feature-icon {
    font-size: 3rem;
    background: linear-gradient(135deg, #007bff, #00d4ff);
    background-clip: text;
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    flex-shrink: 0;
}

.feature-info {
    flex: 1;
}

.feature-info h3 {
    margin: 0 0 0.5rem 0;
    font-size: 1.2rem;
    font-weight: 600;
}

.feature-info p {
    margin: 0;
    color: #666;
    font-size: 0.9rem;
    line-height: 1.4;
}

.feature-grid .feature-badge {
    position: absolute;
    top: 1rem;
    right: 1rem;
    background: linear-gradient(135deg, #ff6b6b, #ff8e8e);
    color: white;
    padding: 0.25rem 0.75rem;
    border-radius: 12px;
    font-size: 0.75rem;
    font-weight: bold;
    text-transform: uppercase;
    letter-spacing: 0.5px;
}

/* Responsive Design */
@media (max-width: 768px) {
    .feature-grid {
        grid-template-columns: 1fr;
    }
    
    .feature-grid .feature-card {
        padding: 1rem;
    }
    
    .feature-icon {
        font-size: 2.5rem;
    }
    
    .feature-info h3 {
        font-size: 1.1rem;
    }
}

/* Navigation Update fÃ¼r 4 Items */
.bottom-nav {
    display: grid;
    grid-template-columns: repeat(4, 1fr);
}

.bottom-nav .nav-item {
    display: flex;
    flex-direction: column;
    align-items: center;
    padding: 0.75rem 0.5rem;
    text-decoration: none;
    color: #6c757d;
    font-size: 0.8rem;
    transition: all 0.3s ease;
}

.bottom-nav .nav-item.active,
.bottom-nav .nav-item:hover {
    color: #007bff;
    background: rgba(0, 123, 255, 0.1);
}

.bottom-nav .nav-icon {
    font-size: 1.2rem;
    margin-bottom: 0.25rem;
}

@media (max-width: 480px) {
    .bottom-nav .nav-text {
        font-size: 0.7rem;
    }
    
    .bottom-nav .nav-icon {
        font-size: 1rem;
    }
}
</style>
{% endblock %}